<html>
    <head>
        <script src="js/jquery-1.6.4.min.js"></script>
        <script type="text/javascript">
            var status;
            
            function showPageAction(tabID)
            {
                chrome.pageAction.show(tabID);
                return {'message':'showing pageaction icon'};
            }

            function copyLyrics(lyrics)
            {
                var clip = jQuery("#PE-clipboard-temp");
                clip.val(lyrics);
                clip.select();
                document.execCommand("copy");
                return {'status':'true'}
            }

            // Listen for the content script to send a message to the background page.
            chrome.extension.onRequest.addListener(function(request, sender, sendResponse)
            {
                if (request.showPageAction === true){
                    status = showPageAction(sender.tab.id);
                } else if (request.copyLyrics === true){
                    status = copyLyrics(request.lyricText);
                }
                
                sendResponse(status);
            });
        </script>
    </head>

    <body>
        <textarea id="PE-clipboard-temp"></textarea>
    </body>
</html>